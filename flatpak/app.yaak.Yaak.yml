id: app.yaak.Yaak
runtime: org.gnome.Platform
runtime-version: "48"
sdk: org.gnome.Sdk
command: yaak-app

finish-args:
  - --socket=wayland
  - --socket=fallback-x11
  - --share=ipc
  - --device=dri
  - --share=network
  - --filesystem=home

modules:
  - name: yaak
    buildsystem: simple
    build-commands:
      - ar -x yaak.deb
      - tar -xf data.tar.gz
      - install -Dm755 usr/bin/yaak-app /app/bin/yaak-app
      - mkdir -p /app/lib
      - cp -r usr/lib/yaak /app/lib/yaak
      - install -Dm644 usr/share/applications/yaak.desktop /app/share/applications/app.yaak.Yaak.desktop
      - desktop-file-edit --set-key=Exec --set-value=yaak-app /app/share/applications/app.yaak.Yaak.desktop
      - desktop-file-edit --set-icon=app.yaak.Yaak /app/share/applications/app.yaak.Yaak.desktop
      - desktop-file-edit --set-key=StartupWMClass --set-value=yaak-app /app/share/applications/app.yaak.Yaak.desktop
      - install -Dm644 app.yaak.Yaak.png /app/share/icons/hicolor/512x512/apps/app.yaak.Yaak.png
      - install -Dm644 app.yaak.Yaak.metainfo.xml /app/share/metainfo/app.yaak.Yaak.metainfo.xml
      - install -Dm644 LICENSE /app/share/licenses/app.yaak.Yaak/LICENSE

    sources:
      - type: file
        dest-filename: yaak.deb
        url: https://github.com/mountain-loop/yaak/releases/download/v2026.2.0-beta.10/yaak_2026.2.0-beta.10_amd64.deb
        sha256: "05584886dad9d6b4222f09e4998b019edc0e2efdc51908dde4205dbfb0b58b4c"
        only-arches:
          - x86_64
      - type: file
        dest-filename: yaak.deb
        url: https://github.com/mountain-loop/yaak/releases/download/v2026.2.0-beta.10/yaak_2026.2.0-beta.10_arm64.deb
        sha256: "3a3923e5e29ae3e6e1ed345259992492196895a67e94c1284315334342e6ae23"
        only-arches:
          - aarch64
      - type: file
        path: app.yaak.Yaak.png
      - type: file
        path: app.yaak.Yaak.metainfo.xml
      - type: file
        path: ../LICENSE
